## 浏览器相关
- 从输入网址到显示内容发生了什么
    1. 查找缓存 与 DNS 域名解析
        - 客户端缓存
            - 浏览器自身DNS缓存
            - 操作系统缓存
            - 路由缓存
        - 服务端查找
            - 本地 LDNS 解析
            - 根域名服务器（Root Server ）解析 返回 LDNS 一个 查询所在的主域名服务器 gTLD Server （.com,.cn）等
            -  本地LDNS 继续发送 请求给 上一步返回的 gTLD Server 
            - gTLD 返回 对应的 Name Server (baidu)
            - Name Server根据 映射关系表 找到 目标ip，返回  TTL 和 IP 给LDNS
            - LDNS 缓存这个结果（时长根据 TTl 确定） 
            - 解析 给到用户  用户根据TTL值缓存在本地系统缓存中，域名解析过程结束。 
    2. 建立TCP链接 （3次握手）
        - 客户端发送 syn = j (同步序列编号) 给到服务端 客户端进入 syn已发送状态
        - 服务端收到 客户端发送的 syn  确定 ack = syn +1  ，再发送自己的syn  = k 给客户端  服务端进入 syn 接收状态
        - 客户端收到 ack + syn 包  确定 ack = syn +1    发送给服务端
        - 客户端 和 服务端建立链接  均进入 ESTABLISHED （连接成功） 状态
        - 可以进行数据 传输
    3. 发起HTTP请求
    4. 服务器响应请求并返回结果
    5. 关闭TCP连接 （4次挥手）
        - 客户端 发送 连接释放 报文 并 停止发送数据 。 seq = u FIN =1  等待服务器回应
        - 服务器收到 连接释放报文 ACK = 1  ack = u+1 FIN=1  seq =  v 此时客户端没有数据 传输了  但是 服务端 可能还有没完成的数据传输 ，所以此时客户端还在等待 服务端发送 连接释放报文 
        - 服务端 数据传输结束  发送连接释放报文 FIN=1，ack=u+1 序列号 可能不是v 了 seq= w  
        - 客户端收到连接释放报文  发出确认报文 ACK=1，ack=w+1 自己的序列号变成 seq = u+1  此时客户端还没有断开  要经过 2*最长报文段寿命 后才会断开
        - 服务端收到 客户端确定报文后 断开  并撤销 TCB
        - 服务端收到 客户端确定报文后 断开  并撤销 TCB
    6. 浏览器渲染
        - 构建 dom 树  
        - 构建 css rule 树  
        - 结合 dom 树 与 css rule 树 生成 render tree
        - 布局：计算render tree 的每个节点在屏幕中的位置
        - 绘制：遍历render tree 使用ui 后端层 绘制 节点
        - 展示



- 浏览器重绘与重排的区别
    - 重排（回流）：当 DOM 的变化影响了元素的几何信息。
    - 重绘：元素的外观发生改变。


- 浏览器的缓存机制 （http请求的缓存）
    ![浏览器缓存机制](./缓存/1.png)
    - 为什么需要缓存机制： 客户端与服务端建立连接 需要消耗时间，为了减少这一部分的消耗。
    - 强缓存：
        - 由服务器返回的 Expires ( HTTP1.0 ) 和  Cache-Control  ( HTTP1.1 ) 决定 cache-control 优先于 expires
        - 客户端带着 缓存标志 查找浏览器缓存 是否有标志 和 有没有失效 
            无标志：直接请求服务端
            有标志：没失效 直接命中缓存返回
            有标志：失效了 返回 缓存标识 到 客户端 客户端向 服务端继续发送http 请求
    - 协商缓存 ：
        - 由服务器返回的 Last-Modified / If-Modified-Since 和 Etag / If-None-Match 所决定的 是否有资源的更新  后者优先于前者
        - 当 浏览器缓存 中有 客户端请求 所带 的 缓存标识 但是 缓存失效了
            进入协商缓存 ： 客户端 带着标识 询问服务端 
            如果发现 该资源没有更新 返回客户端 304  客户端去 浏览器缓存中 读取
            如果发现 资源更新了 返回客户端200 与 新的资源 客户端 将 资源存在浏览器缓存中
    



-